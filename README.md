# Twitter Clone (Azure Deployment)

A full-stack, pixel-perfect Twitter/X clone built with **Next.js 15** and **Spring Boot 3**, designed for cloud-native deployment on **Azure Container Apps**.

## üöÄ Tech Stack

### Frontend
-   **Framework**: Next.js 15 (App Router)
-   **Language**: TypeScript
-   **Styling**: Tailwind CSS, Shadcn/UI
-   **State Management**: Zustand, TanStack Query
-   **Authentication**: Custom JWT Auth + Google OAuth
-   **Build**: Docker (Multi-stage)

### Backend
-   **Framework**: Spring Boot 3.4
-   **Language**: Java 21
-   **Database**: PostgreSQL
-   **Storage**: Azure Blob Storage (for media)
-   **Security**: Spring Security 6, JWT, OAuth2 (Google)
-   **Build**: Maven, Docker

### DevOps & Cloud
-   **Containerization**: Docker
-   **Registry**: Azure Container Registry (ACR)
-   **Orchestration**: Azure Container Apps (ACA)
-   **CI/CD**: GitHub Actions (Azure Generated Workflows)
-   **Database**: Azure Database for PostgreSQL (Flexible Server)

## ‚ú® Features

-   **Authentication**: Sign up/Sign in with Email or Google.
-   **Feed**: For You (Algorithm) and Following feeds.
-   **Tweets**: Create rich text tweets, upload images, reply, quote, and repost.
-   **Interactions**: Like, save/bookmark, and share tweets.
-   **Search**: Full-text search for users and hashtags.
-   **Notifications**: Real-time notifications for interactions.
-   **Profile**: Customizable user profiles with banners and avatars.
-   **Premium**: Subscription mock-up flow with "Blue Check" verification.
-   **Responsive**: Fully responsive mobile-first design.

## üõ†Ô∏è Getting Started (Local)

### Prerequisites
-   Node.js 20+
-   Java 21 (JDK)
-   Docker & Docker Compose

### 1. Database Setup
Run PostgreSQL locally using Docker Compose:
```bash
docker-compose up -d
```

### 2. Backend Setup
Navigate to `twitter-backend`:
1.  Configure `src/main/resources/application.yml` (or use env vars) to point to your local DB.
2.  Run the application:
    ```bash
    ./mvnw spring-boot:run
    ```

### 3. Frontend Setup
Navigate to `twitter-frontend`:
1.  Install dependencies: `npm install`
2.  Create `.env.local` based on `.example.env`.
3.  Run the development server:
    ```bash
    npm run dev
    ```
4.  Open [http://localhost:3000](http://localhost:3000).

## ‚òÅÔ∏è Deployment (Azure Container Apps)

This project uses **Azure-generated CI/CD workflows** to build and deploy to Azure Container Apps.

### 1. Workflows
The workflows are located in `.github/workflows/`:
-   `deploy-backend.yml`: Builds Java/Spring Boot image and deploys to the API Container App.
-   `deploy-frontend.yml`: Builds Next.js image and deploys to the Web Container App.

These workflows utilize **OIDC Authentication** (`azure/login@v2`) and the `azure/container-apps-deploy-action@v2`.

### 2. Secrets Configuration
The pipelines rely on secrets automatically generated by the Azure "Continuous Deployment" setup (e.g., `AZURE_CLIENT_ID`, `REGISTRY_USERNAME`).

**Manual Secrets Required:**
In addition to the auto-generated Azure secrets, the following custom secrets must be added to GitHub for the Frontend build:

| Secret Name | Description |
|---|---|
| `NEXT_PUBLIC_API_URL` | The public URL of your deployed Backend Container App |
| `NEXT_PUBLIC_GOOGLE_CLIENT_ID` | Google OAuth Client ID |

### 3. Environment Variables (Azure Portal)
Ensure the **Backend Container App** has these environment variables configured in the Azure Portal:
-   `DB_URL`, `DB_USER`, `DB_PASSWORD` (Database Connection)
-   `FRONTEND_URL` (For CORS)
-   `AZURE_STORAGE_ACCOUNT_NAME`, `AZURE_STORAGE_ACCOUNT_ACCESS_KEY` (Blob Storage)
-   `GOOGLE_OAUTH_CLIENT_ID`

## üìÑ License
MIT
